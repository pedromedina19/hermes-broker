syntax = "proto3";

package broker;

option go_package = "github.com/pedromedina19/hermes-broker/pb";

service BrokerService {
  // Publishing is "Fire and Forget" (Unary)
  rpc Publish (PublishRequest) returns (PublishResponse);

  // Subscribing is a continuous flow of data (Server-Side Streaming).
  rpc Subscribe (SubscribeRequest) returns (stream Message);
}

message PublishRequest {
  string topic = 1;
  bytes payload = 2; // Raw binary data (serialized JSON or anything else)
}

message PublishResponse {
  bool success = 1;
}

message SubscribeRequest {
  string topic = 1;
}

message Message {
  string topic = 1;
  bytes payload = 2;
  int64 timestamp = 3;
}